<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas Example</title>
	<style type="text/css">
		canvas{
			border: 1px solid black;
			/* These screw up mouse and touch tracking... hmm... 	height: 80vh;	width: 80vw; */
		}
	</style>
</head>
<body>
	<canvas id="canvas" width="500" height="500">
		(Canvas Alt-Text)
	</canvas>

<script>
	var canvas = document.querySelector('canvas');
	var ctx = canvas.getContext('2d');

	var x = 0;
	var y = 0;
	var radius = 5;
	var color = 'blue';

	function drawCircle(){
		ctx.beginPath();
		ctx.fillStyle = color;
		ctx.arc(x,y,radius,0,2*Math.PI);
		ctx.fill();
	}

	function customColorChange(new_color){
		console.log("New Color Value - Custom - Hex: ",new_color);
		color=new_color;
	}

	// Handles tracing mouse movement and changing draw-values accordingly
	window.addEventListener('mousemove', function(e) {
		//console.log(e.pageX);
		//console.log(e.pageY);
		x = e.pageX;
		y = e.pageY;
		drawCircle();
	})

	// Handles response to key depression, coordinates coloration and canvas-reset responses
	window.addEventListener('keydown', function(e) {
		//console.log("event listener triggered: keypress");
		//console.log(e)
		//console.log(e.key)
		
		// The readability of switch cases <3
		switch(e.key){
			// Case Set: Color Changing
			case "b":
				console.log("Case_Blue, my dude");
				color="blue";
				break;

			case "g":
				console.log("Case_Green, my dude");
				color="green";
				break;

			case "r":
				console.log("Case_Red, my dude");
				color="red";
				break;

			case "y":
				console.log("Case_Yellow, my dude");
				color="yellow";
				break;

			// Draw-Radius Cases
			case "ArrowUp":
				console.log("Case_ArrowUp: adjusting radius to: ",radius+1);
				radius += 1;
				break;
			case "ArrowDown":
				console.log("Case_ArrowDown: adjusting radius to: ",radius-1);
				if(radius>1){
					radius -=1;
				}
				else{
					console.log("Would adjust to radius of zero; this is not permitted.")
					console.log("Radial adjustment aborted.")
				}
				break;
			// Unique Case: Space-to-Clear-Canvas
			case " ":
				console.log("Why space-race when you can trigger the Space_Case?");
				// Implementation Funfact: clearRect just draws a rectangle of RGB_A (0,0,0,0)
				ctx.clearRect(0,0,canvas.width, canvas.height);
				break;
		}
	})

	window.addEventListener('touchmove', function(e) {
		//console.log("touch_move");
		//console.log(e);

		// So, touch-event for touchmove will have a load of properties. One is "touches", a list
		// that seemingly traces the different touch-inputs. 

		// e.touches[0] would correspond with the first vein of touch-input
		// e.touches[each] should have a few attributes including pageX/screenX/clientX
		// as well as those values with Y, etc.

		// https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y
			// PageX/Y	= Relative to top-left corner of rendered page
			// ClientX/Y = Relative to top-left corner of visible on-screen page
			// ScreenX/Y = Relative to top-left corner of monitor

			// It seems like Client and Page are pretty similar in this case but we'd want Client
			// because it'd correspond with their perspective when trying to manipulate the canvas

		var touch_main = e.touches[0];
		console.log("x:", touch_main.clientX, " - ", "y:", touch_main.clientY);
		x = touch_main.clientX;
		y = touch_main.clientY;
		drawCircle();
	})

</script>

<!--	<br><input type="file" id="myFile" size="50" onchange="myFunction()"><br>		-->
	<div>
		<input type="color" id="color_selector" value="#909090" onchange="customColorChange(value)">
		<label for="draw_color">&lt;-- Select New Draw Color</label>
	</div>
</body>
</html>

<!--
						Requirements

1) Create a canvas element with a border.
The canvas should be about 80% the width and 80% height of the screen.
If the window is dynamically resized, you do not need to resize the canvas,
but if I use Inspect element to switch to different device size it should.

7) On a mobile device changing the orientation should clear and resize the canvas.
This may be tricky so do what you need to do to make it work. (It may be more dramatic than "clearing" the canvas.

8) Add a color picker that allows the user to choose a custom color.
This won't work in Safari (on mobile), thats okay.
-->